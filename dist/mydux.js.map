{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap fc8d9e731a59d7b0b6e2","webpack:///./src/index.js","webpack:///./src/middlewares/promise.js","webpack:///./src/middlewares/thunk.js"],"names":["promiseMiddleware","thunkMiddlware","createStore","reducer","initState","applyMiddleware","state","listeners","_dispatch","action","forEach","listener","dispatch","Array","isArray","toString","call","_action","getState","subsribe","push","filter","l","combineReducer","reducers","Object","keys","key","middlewares","store","mds","map","m","reduceRight","previous","current","then","next","result","playload","error","Promise","reject","thunk"],"mappings":"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","file":"mydux.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mydux\"] = factory();\n\telse\n\t\troot[\"mydux\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fc8d9e731a59d7b0b6e2","import promise from '../src/middlewares/promise'\nimport thunk from '../src/middlewares/thunk'\n\nexport var promiseMiddleware = promise\nexport var thunkMiddlware = thunk\n\nexport var createStore = function (reducer, initState = {}, applyMiddleware) {\n  if (typeof initState === 'function') {\n    applyMiddleware = initState\n    initState = {}\n  }\n  var state = initState\n  var listeners = []\n  var _dispatch = function _dispatch (action) {\n    state = reducer(state, action)\n    listeners.forEach(listener => listener())\n  }\n  var dispatch = function dispatch (action) {\n    if (Array.isArray(action) || toString.call(action) === '[object Array]') {\n      action.forEach(_action => dispatch(_action))\n      return\n    }\n    if (applyMiddleware) {\n      applyMiddleware({\n        dispatch: _dispatch,\n        getState\n      }, action)\n    } else {\n      _dispatch(action)\n    }\n  }\n\n  var subsribe = function subsribe (listener) {\n    listeners.push(listener)\n    return () => {\n      listeners = listeners.filter(l => l !== listener)\n    }\n  }\n  var getState = function getState () {\n    return state\n  }\n  return {\n    dispatch,\n    subsribe,\n    getState\n  }\n}\n// 返回一个大大的reducer\n// 有个约定就是，reducer的属性名需要与state的属性名一致\nexport var combineReducer = function combineReducer (reducers) {\n  return (state, action) => {\n    Object.keys(reducers).forEach(key => {\n      state[key] = reducers[key](state[key], action)\n    })\n    return state\n  }\n}\n\n// export var applyMiddleware = function applyMiddleware (middleware1， middleware2) {\nexport var applyMiddleware = function applyMiddleware (...middlewares) {\n  return (store, action) => {\n    // middleware1(middleware2(dispatch))(action)\n    // 如果倒叙的话就不用这样转了\n    var mds = middlewares.map(m => m(store))\n    mds.reduceRight((previous, current) => {\n      return current(previous)\n    }, store.dispatch)(action)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","export default function promiseMiddleware (store) {\n  return next => action => {\n    // 判断action是否是promise方法\n    if (typeof action.then === 'function') {\n      action.then(\n        result => {\n          next(result)\n        },\n        error => {\n          store.dispatch({...action, playload: error})\n          return Promise.reject(error)\n        })\n    } else if (action.playload && typeof action.playload.then === 'function') {\n      action.playload.then(\n        result => {\n          next(result)\n        },\n        error => {\n          store.dispatch({...action, playload: error})\n          return Promise.reject(error)\n        })\n    } else {\n      next(action)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/middlewares/promise.js","export default function thunk (store) {\n  return next => action => {\n    if (typeof action === 'function') {\n      action(next)\n    } else {\n      next(action)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/middlewares/thunk.js"],"sourceRoot":""}